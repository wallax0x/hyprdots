# ============================================================
# Gentoo make.conf — Intel i3-1215U / Wayland / Hyprland
# Versão: 2.0 (Otimizada e Corrigida)
# ============================================================
# CPU: 12th Gen Intel Core i3-1215U (6 cores, 8 threads)
# ============================================================

# ----- Flags de compilação -----
# Otimizado para o CPU local e com segurança de stack
COMMON_FLAGS="-march=native -O2 -pipe -fstack-protector-strong"
CFLAGS="${COMMON_FLAGS}"
CXXFLAGS="${COMMON_FLAGS}"
FCFLAGS="${COMMON_FLAGS}"
FFLAGS="${COMMON_FLAGS}"

# ----- Paralelismo de compilação -----
# Usa todas as 8 threads do CPU para a máxima velocidade
MAKEOPTS="-j8"
EMERGE_DEFAULT_OPTS="--jobs=8 --load-average=8"
# Dá prioridade mais baixa à compilação para manter o desktop responsivo
PORTAGE_NICENESS=10

# ----- Licenças -----
ACCEPT_LICENSE="*"

# ----- GPU e entrada -----
VIDEO_CARDS="intel"
INPUT_DEVICES="libinput"

# ----- USE flags gerais do sistema -----
# Focado em Wayland, systemd e PipeWire.
# A flag 'pulseaudio' é necessária para a compatibilidade com o pipewire-pulse.
USE="
    alsa
    bluetooth
    dbus
    ffmpeg
    gstreamer
    networkmanager
    pipewire
    pulseaudio
    systemd
    wayland
    X
    xwayland

    
    vaapi
    vdpau
    vulkan


    -elogind
    -consolekit
    -jack
"

# ----- Boot EFI -----
GRUB_PLATFORMS="efi-64"

# ----- Portage otimizações -----
# Ativa o download paralelo e o cache de compilação (ccache)
FEATURES="parallel-fetch ccache"
CCACHE_DIR="/var/cache/ccache"
CCACHE_SIZE="10G"

# ----- Mensagens em inglês -----
LC_MESSAGES=C.utf8

# ----- CPU flags automáticas (Opcional - Requer app-portage/cpuid2cpuflags) -----
# CPU_FLAGS_X86="$(cpuid2cpuflags)"
